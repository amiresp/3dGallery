<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Art Exhibition</title>
    <link rel="icon" type="image/svg+xml" href="/img/art.png">
    <link rel="stylesheet" href="./syle.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,100;9..40,200;9..40,300;9..40,400;9..40,500;9..40,600;9..40,700;9..40,800&family=Inter:wght@400;500;700&family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Open+Sans:wght@300;400;500;600;800&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="loading-screen">
        <div id="loading-screen-content">
            <div id="loading-screen-title">
                <h1>3D Art Exhibition</h1>
            </div>
            <div id="loading-screen-info">
                <dotlottie-player src="https://lottie.host/e3f56f6b-e172-48d8-a6ec-3d67cebb02c8/D8gu54WlXP.json"
                    background="transparent" speed="1" style="width: 300px; height: 300px" direction="1" mode="normal"
                    loop autoplay></dotlottie-player>
            </div>
        </div>
    </div>
    <div id="sittingAnimationInfoBox">
        Press E to relax on the sofa
    </div>
    <div id="menu">
        <div id="content_container">
            <div id="content">
                <div class="title">
                    <div class="fade-in-text ">
                        <span>3D Art Exhibition </span>
                    </div>
                </div>

                <div class="title-info">
                    <div class="card-box">
                        <div class="hero_left">
                            <div class="fade-in-text">
                                <span>Step into a world where art transcends boundaries. </span> <span> Enter our
                                    immersive
                                    3D
                                    Art Gallery and
                                    embark
                                    on a journey through
                                    its virtual halls.
                                </span>
                            </div>
                            <div style="margin-top: 25px;" class="fade-in-text">
                                <span>This 3D Art Gallery was crafted by <span style="font-weight: 700;">Ali Riza
                                        Ozzaim</span> , driven by a
                                    profound passion to
                                    fuse art with technology,
                                    bringing it to life in ways never before imagined.</span>
                            </div>
                            <div class="buttons">
                                <select id="collection-select" class="button-50" style="width:100%;margin-right: 10px;">
                                    <option value="">Loading...</option>
                                </select>
                                <button id="play_button" class="button-50">EXPLORE ART</button>

                                <!-- <div id="about_button_container">
                                    <button id="about_button" class="button-50">ABOUT</button>
                                </div> -->
                            </div>
                        </div>
                    </div>

                    <!-- <div class="hero_right
                    ">
                        <canvas id="hero_canvas"></canvas>
                        <div class="canvas_text"><span>"The aim of art is not to represent the
                                outward
                                appearance of things, but
                                their inward significance." - Aristotle</div>
                    </div> -->
                </div>
            </div>
        </div>

        <div id="about-overlay">
            <button id="close-about">X</button>
            <h1>About the 3D Art Gallery</h1>
            <p>
                Welcome to our virtual 3D Art Gallery. Here, you can navigate through a
                variety of wonderful artworks and learn about their history and
                significance.
            </p>
            <p>
                This project is brought to you by Emilian Kasemi. We believe in the
                power of art to inspire, provoke thought, and communicate across
                cultures and epochs. Our mission is to make art accessible to everyone,
                regardless of location or background.
            </p>
            <p>
                Feel free to explore and engage with the artworks. The gallery is best
                experienced in full-screen mode. For optimal navigation, use the arrow
                keys or the W, A, S, and D keys. You can also use your mouse to change
                the viewing direction. Additional information about the artworks will
                appear on your screen as you approach them.
            </p>
        </div>


        <div id="info-panel">
            <div id="info-header">
                <h3>Controls
                    <xml version="1.0" encoding="utf-8">
                        <svg width="50px" height="50px" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                d="M10 14H14M6 14H7M17 12H18M6 12H7M9 12H10M11.5 12H12.5M14 12H15M17 14H18M17 10H18M14 10H15M11.5 10H12.5M9 10H10M6 10H7M5 8H19C19.5523 8 20 8.44772 20 9V15C20 15.5523 19.5523 16 19 16H5C4.44772 16 4 15.5523 4 15V9C4 8.44772 4.44772 8 5 8Z"
                                stroke="#464455" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                </h3>
                <button id="toggle-info">Hide</button>
            </div>
            <div id="info-content">
                <p><b>W/A/S/D:</b> Move around</p>
                <p><b>Mouse:</b> Look around</p>
                <p><b>Space:</b> Jump</p>
                <!-- <p><b>Ctrl:</b> Crouch</p> -->
                <p><b>M:</b> Show Menu</p>
                <!-- <p><b>E:</b>Sit on the Sofa</p> -->
                <p><b>Enter:</b> Start exploration</p>
                <p><b>Esc:</b> Stop exploration</p>
                <p><b>G:</b> Start audio guide</p>
                <p><b>P:</b> Stop audio guide</p>
            </div>
        </div>


        <div id="audio_controls">
            <button id="stop_audio">Stop Audio</button>
        </div>
        <div id="painting-info"></div>
    </div>

    <script type="module" src="./main.js"></script>
    <script>

        document.addEventListener('DOMContentLoaded', () => {
            const select = document.getElementById('collection-select');

            fetch('http://141.11.182.36:8000/api/rooms/') // ← آدرس JSON یا API رو اینجا بذار
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    // پاک کردن گزینه‌های اولیه
                    select.innerHTML = '';

                    const option = document.createElement('option');
                    option.value = '---';
                    option.textContent = 'Choose a collection';
                    select.appendChild(option);

                    data.forEach(item => {
                        const option = document.createElement('option');
                        option.value = item.slug;
                        option.textContent = item.title;
                        select.appendChild(option);
                    });

                    // اگر URL دارای پارامتر بود، مقدار اولیه رو تنظیم کن
                    const params = new URLSearchParams(window.location.search);
                    const current = params.get('collection');
                    if (current) {
                        select.value = current;
                        handleCollectionChange(current);
                    }

                    select.addEventListener('change', (e) => {
                        const selectedValue = e.target.value;
                        const url = new URL(window.location.href);
                        const params = url.searchParams;

                        if (params.get('collection') === selectedValue) {
                            params.delete('collection');
                        } else {
                            params.set('collection', selectedValue);
                        }

                        window.history.replaceState({}, '', `${url.pathname}?${params.toString()}`);
                        handleCollectionChange(selectedValue);
                    });
                })
                .catch(error => {
                    console.error('Fetch error:', error);
                    select.innerHTML = '<option disabled>خطا در بارگذاری گزینه‌ها</option>';
                });
        });


    </script>
    <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs" type="module"></script>



</body>

</html>